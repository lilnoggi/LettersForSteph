<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Love Letters For Steph</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: black; /* black background for stars */
    margin: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
    position: relative;
  }

  canvas {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 0; /* behind letters */
  }

  h1 {
    margin-bottom: 10px;
    font-size: 2.5rem;
    text-shadow: 2px 2px 6px rgba(0,0,0,0.3);
    color: #fff;
    z-index: 1;
    position: relative;
  }

  #choose-text {
    margin-bottom: 20px;
    font-size: 1.2rem;
    z-index: 1;
    position: relative;
  }

  #buttons {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* 2 columns on larger screens, 1 column on smaller */
  justify-items: center;  /* center buttons in each grid cell */
  gap: 12px 20px;         /* vertical and horizontal gaps */
  max-width: 600px;       /* optional: keeps the grid from getting too wide */
  margin: 0 auto;         /* center the grid horizontally */

  /* New additions for smooth show/hide */
  opacity: 1;
  visibility: visible;
  transition: opacity 0.3s ease;
}

  .button {
    padding: 14px 20px;
    font-size: 16px;
    border-radius: 30px;
    border: none;
    background: linear-gradient(135deg, #a4508b, #5f0a87);
    color: white;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.3s;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    z-index: 1;
    position: relative;

    width: 100%; /* make buttons take full width of grid cell */
    max-width: 280px; /* optional: limit max width */
    text-align: center; /* center text */
    white-space: normal; /* allow text to wrap */
  }
  .button:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 14px rgba(0,0,0,0.4);
  }

  .letter {
    display: none;
    padding: 30px;
    border: none;
    background: rgba(255, 240, 245, 0.95); /* slightly transparent so stars show behind */
    border-radius: 20px;
    max-width: 450px;
    box-shadow: 0 15px 30px rgba(0,0,0,0.3);
    color: #333;
    text-align: left;
    font-family: 'Georgia', serif;
    font-size: 1rem;
    line-height: 1.6;
    opacity: 0;
    transform: scaleY(0);
    transform-origin: top center;
    animation: unfold 0.6s forwards ease-out;
    z-index: 1;
    position: absolute;
    top: 35%;
    transform: translate(-50%, -50%) scaleY(0);
    max-height: 80vh;
    overflow-y: auto;
  }
  .letter h2 {
    margin-top: 0;
    color: #a4508b;
    font-family: 'Georgia', serif;
  }

  @keyframes unfold {
    0% { opacity: 0; transform: scaleY(0); }
    60% { opacity: 1; transform: scaleY(1.05); }
    100% { opacity: 1; transform: scaleY(1); }
  }

  .back-button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 14px;
    border-radius: 30px;
    border: none;
    background: linear-gradient(135deg, #5f0a87, #a4508b);
    color: white;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.3s;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  }
  .back-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 14px rgba(0,0,0,0.4);
  }
</style>
</head>
<body>

<canvas id="starCanvas"></canvas>

<h1>To my love</h1>
<p id="choose-text">Please choose a letter to open!</p>

<div id="buttons">
  <button class="button" onclick="openLetter('receives')">üíå Read me when you first receive this</button>
  <button class="button" onclick="openLetter('sad')">üåß Read me when you're feeling sad</button>
  <button class="button" onclick="openLetter('miss')">‚ù§Ô∏è Read me when you miss me</button>
  <button class="button" onclick="openLetter('birthday')">üéÇ Read me when IT'S YOUR BIRTHDAY!</button>
  <button class="button" onclick="openLetter('six-month')">ü•Ç Read me on October 1st</button>
  <button class="button" onclick="openLetter('one-year')">‚åõ Read me on April 1st 2025</button>
  <button class="button" onclick="openLetter('angry')">üß® Read me when you're mad at me</button>
  <button class="button" onclick="openLetter('good-news')">üèÜ Read me when you've got good news!</button>
  <button class="button" onclick="openLetter('bad-news')">üì¥ Read me when you've got bad news</button>
  <button class="button" onclick="openLetter('graduate')">üéì Read me when you graduate!</button>
  <button class="button" onclick="openLetter('encouragement')">üéá Read me when you need some encouragement</button>
  <button class="button" onclick="openLetter('spotify')">üéµ Open me whenever you want!</button>
  <button class="button" onclick="openLetter('countdown')">‚è≥ Until we meet again</button>
  <button class="button" onclick="openLetter('stephs-letters')">üìù Write me a letter!</button>
  <button class="button" onclick="openLetter('updates')">updates</button>
</div>

<!-- Letters -->
<div id="receives" class="letter">
  <h2>My first little letter to you</h2>
  <p>
    Steph, if you're reading this, it means you've just received this little surprise from me!
    I made this so you can have a little piece of me with you whenever you need it.
    I made this just for you so you can see how much I care about you and how distance means nothing to me.
    I hope it brings a smile to your face and reminds you how much I care about you.
    Remember, no matter where we are, I'm always thinking of you.
    I love you so much, and I can't wait until we can be together again.
    Until then, keep this letter close to your heart as I keep you in mine.
  </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="sad" class="letter">
  <h2>When you're feeling sad</h2>
  <p>
    Hey Steph, I know life can be tough sometimes, and it's okay to feel sad.
    Just remember that you're not alone. I'm here for you, and I believe in you.
    You are strong, beautiful, and capable of overcoming anything that comes your way.
    Take a deep breath, and know that brighter days are ahead. I love you!
    Just remember that you're not alone. I'm here for you, and I will always believe in you.
    You are strong, beautiful, and capable of overcoming anything that comes your way!
    We will get through it together, and I will be by your side every step of the way.
    I love you!
    From your #1 supporter!
   </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="miss" class="letter">
  <h2>When you miss me</h2>
  <p>
    Steph, I know there are times when you miss me, and I miss you too.
    But remember, distance is just a test of how far love can travel.
    Stephy, please know I am missing you too.
    But remember, distance is just a test of how far our love can travel.
    Every moment apart is a moment closer to when we can be together again.
    Until then, keep me in your heart as I keep you in mine. I love you more than words can say!
    So I'll show you in other ways,
    Just how much I love you!
    Love your baby! xoxo
  </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="birthday" class="letter">
  <h2>IT'S YOUR BIRTHDAY</h2>
  <p>
    Steph, it's not your birthday yet...
  </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="six-month" class="letter">
  <h2>Wow... six months?!</h2>
  <p>
    Steph, stop being impatient...
  </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="one-year" class="letter">
  <h2>A whole year?!</h2>
  <p>
    Baby... not yet :(
  </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="angry" class="letter">
  <h2>I hope you never have to read this one :(</h2>
  <p>
    But if you do, please know I am truely sorry.
    I never want to hurt you or make you feel bad.
    But if I ever did I hope you can forgive me.
    I love you so so much, don't forget that and I want to work it out with you no matter what.
    I am so lucky to have you in my life and I never want to lose you.
    You are my world.
    My universe.
    My everything.
    I love you baby.
  </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="good-news" class="letter">
  <h2>I'M EXCITED FOR YOU BABY!</h2>
  <p>
    I'm so happy for you baby!
    I'm so glad you got some good news!
    I can't wait to celebrate with you when we next see each other!
    I love you so much and I am so so proud of you!
    Keep being amazing baby!
    Love you always,
    Your baby xoxo
  </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="bad-news" class="letter">
  <h2>Owh my baby :((</h2>
  <p>
    I'm sorry to hear that things didn't work out this time baby.
    But don't let this get you down! I know you'll come back stronger than ever!
    A wise turtle (or tortoise) once said "Yesterday is history, tomorrow is a mystery, 
    but today is a gift. That is why it is called the present."
    So keep your head high up my love!
    And I hope tomorrow brings you a better day!
    I love you so much baby!
  </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="graduate" class="letter">
  <h2>HOLD UP BABY</h2>
  <p>
    It'll come faster than you think.
  </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="encouragement" class="letter">
  <h2>Oh baby</h2>
  <p>
    I want to remind you of how amazing you are!
    You are so smart, talented, and capable of achieving anything you set your mind to!
    I believe in you and I know you can do great things!
    Whenever you feel down or discouraged, just remember that I am here for you and I will always support you!
    You are my sunshine and you light up my world!
    I love you so much baby!
    You got this pookie! Keep doing you!
  </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="spotify" class="letter">
  <h2>The soundtrack of our love</h2>
  <p>Our favourite songs to listen to together!</p>

  <iframe data-testid="embed-iframe" style="border-radius:12px" src="https://open.spotify.com/embed/playlist/32b11IcyboQt1XATB6pexe?utm_source=generator&theme=0" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>

  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<div id="countdown" class="letter">
  <h2>Not long now!</h2>
  <p id="countdown-timer" style="text-align: center; font-size: 2em;"></p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<!-- Steph's Letters -->
<div id="stephs-letters" class="letter">
  <h2>Write me a letter!</h2>
  <p>
    Steph! I made this section just for you to write me something whenever you want!
    Just type your letter in the box below and click "Save Letter".
    Then, whenever you want to read your letters, just click the button below!
    I can't wait to read all your lovely letters baby!
    I love you so much!
  </p>
  <textarea id="letter-input" placeholder="Type your letter here..." rows="6" style="width: 100%; border-radius: 10px; padding: 10px; font-size: 1rem; background: rgba(255, 255, 255, 0.8); resize: vertical;"></textarea>
  <div style="display: flex; justify-content: space-between; margin-top: 10px;">
    <button id="save-button" class="back-button" style="background: linear-gradient(135deg, #5f0a87, #a4508b);">üíæ Save Letter</button>
    <button id="view-button" class="back-button" style="background: linear-gradient(135deg, #a4508b, #5f0a87);">üìÇ View Saved Letters</button>
  </div>
  <div id="saved-letters-container" style="margin-top: 20px;"></div>
  <button class="back-button" onclick="goBack()" style="margin-top: 20px;">‚¨Ö Back</button>
</div>

<!-- UPDATES-->
<div id="updates" class="letter">
  <h2>Updates V1</h2>
  <p>
    Baby, I plan to keep adding more stuff for you over time.
    Please let me know if you have any cool ideas or anything!
    But yeah, keep checking here, I want to add something everyday if I can!
    I love you so so much Steph, I wish you knew how much you mean to me.
    I love you
    16/09/2025 - Added Spotify playlist
    16/09/2025 - Added countdown timer
    16/09/2025 - Added Steph's letters section
  </p>
  <button class="back-button" onclick="goBack()">‚¨Ö Back</button>
</div>

<script>
  const canvas = document.getElementById('starCanvas');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  // --- STARS AND HEARTS LOGIC (from your stars.js) ---
  const stars = [];
  const hearts = [];
  const messages = ["I love you!", "You are my universe!", "You are my star!"];
  const activeMessages = [];
  
  for (let i=0; i<100; i++) {
      stars.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, radius: Math.random()*2+1, brightness: Math.random()*155+100, change: (Math.random()*4.5+0.45)*(Math.random()<0.5?-1:1)});
  }

  function drawHeart(x,y,size){
      ctx.beginPath();
      ctx.moveTo(x,y);
      ctx.bezierCurveTo(x,y-size/2,x-size,y-size/2,x-size,y);
      ctx.bezierCurveTo(x-size,y+size/2,x,y+size/1.5,x,y+size);
      ctx.bezierCurveTo(x,y+size/1.5,x+size,y+size/2,x+size,y);
      ctx.bezierCurveTo(x+size,y-size/2,x,y-size/2,x,y);
      ctx.closePath();
      ctx.fillStyle="rgba(255,100,180,0.8)";
      ctx.fill();
  }

  function animateStars(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // stars
      stars.forEach(s=>{
          s.brightness+=s.change;
          if(s.brightness>255){s.brightness=255;s.change*=-1;}
          if(s.brightness<100){s.brightness=100;s.change*=-1;}
          const b=Math.floor(s.brightness);
          ctx.fillStyle=`rgb(${b},${b},${b})`;
          ctx.beginPath();
          ctx.arc(s.x,s.y,s.radius,0,Math.PI*2);
          ctx.fill();
      });

      // hearts
      for(let i=hearts.length-1;i>=0;i--){
          let h=hearts[i];
          h.trail=h.trail||[];
          h.trail.push({x:h.x,y:h.y,size:h.size,opacity:h.opacity});
          if(h.trail.length>8) h.trail.shift();
          h.trail.forEach((t,index)=>{
              ctx.globalAlpha=t.opacity*((h.trail.length-index)/h.trail.length);
              drawHeart(t.x,t.y,t.size*0.8);
          });
          ctx.globalAlpha=1;
          drawHeart(h.x,h.y,h.size);
          h.x+=h.speedX; h.y+=h.speedY; h.opacity-=0.005;
          if(h.y>canvas.height||h.opacity<=0) hearts.splice(i,1);
      }

      if(Math.random()<0.02){
          hearts.push({x:Math.random()*canvas.width,y:-20,size:Math.random()*10+5,speedX:(Math.random()-0.5)*2,speedY:Math.random()*2+1,opacity:1.0});
      }

      requestAnimationFrame(animateStars);
  }

  animateStars();

  canvas.addEventListener("click",function(e){
      const mouseX=e.clientX;
      const mouseY=e.clientY;
      stars.forEach(star=>{
          const dx=mouseX-star.x;
          const dy=mouseY-star.y;
          if(Math.sqrt(dx*dx+dy*dy)<star.radius+5){
              const msg=messages[Math.floor(Math.random()*messages.length)];
              activeMessages.push({text:msg,x:star.x+10,y:star.y-10,opacity:1.0});
              for(let i=0;i<3;i++) hearts.push({x:star.x,y:star.y,size:Math.random()*10+5,speedX:(Math.random()-0.5)*2,speedY:Math.random()*2+1,opacity:1.0,trail:[]});
          }
      });
  });

  // --- LETTER LOGIC ---
function openLetter(id){
    const buttons = document.getElementById('buttons');
    buttons.style.opacity = 0;
    buttons.style.visibility = 'hidden';
    document.getElementById('choose-text').style.display = 'none';
    document.querySelectorAll('.letter').forEach(el=>el.style.display='none');
    const letter=document.getElementById(id);
    letter.style.display='block';
    letter.style.animation='unfold 0.6s forwards ease-out';
}

function goBack(){
    document.querySelectorAll('.letter').forEach(el=>el.style.display='none');
    const buttons = document.getElementById('buttons');
    buttons.style.opacity = 1;
    buttons.style.visibility = 'visible';
    document.getElementById('choose-text').style.display='block';
}

  window.addEventListener('resize',()=>{
      canvas.width=window.innerWidth;
      canvas.height=window.innerHeight;
  });

  // --- COUNTDOWN LOGIC ---
  // Set date to count down to
  const countDownDate = new Date("September 29, 2025 00:00:00").getTime();

  // Update countdown every second
  const x= setInterval(function() {
    // Get today's date and time
    const now = new Date().getTime();

    const distance = countDownDate - now;

    // Time calculations
    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    // Display result
    document.getElementById("countdown-timer").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";

    // If countdown is over
    if (distance < 0) {
      clearInterval(x);
      document.getElementById("countdown-timer").innerHTML = "I GET TO SEE MY BABY TODAY!!!";
    }
    }, 1000);

    // Call openLetter()
    function showCountdown() {
      openLetter('countdown');
    }

// --- STEPH'S LETTERS LOGIC ---
// Get references to elements
const letterInput = document.getElementById('letter-input');
const saveButton = document.getElementById('save-button');
const viewButton = document.getElementById('view-button');
const savedLettersContainer = document.getElementById('saved-letters-container');

// Function to save the letter
saveButton.onclick = function() {
    const letter = letterInput.value;
    if (letter.trim() === '') {
        alert('The letter is empty!');
        return;
    }

    const letters = JSON.parse(localStorage.getItem('stephsLetters')) || [];
    const date = new Date().toLocaleDateString();
    letters.push({ date: date, content: letter });
    localStorage.setItem('stephsLetters', JSON.stringify(letters));
    alert('Letter saved successfully!');
    letterInput.value = ''; // Clear the input after saving
};

// Function to view all saved letters
viewButton.onclick = function() {
    const letters = JSON.parse(localStorage.getItem('stephsLetters')) || [];
    savedLettersContainer.innerHTML = ''; // Clear the container first

    if (letters.length === 0) {
        savedLettersContainer.innerHTML = '<p style="color: #333; text-align: center;">No letters saved yet!</p>';
        return;
    }

    letters.forEach(letter => {
        const letterDiv = document.createElement('div');
        letterDiv.style.background = 'rgba(255, 240, 245, 0.8)';
        letterDiv.style.padding = '15px';
        letterDiv.style.borderRadius = '10px';
        letterDiv.style.marginBottom = '10px';
        letterDiv.style.color = '#333';
        letterDiv.innerHTML = `
            <h4 style="margin-top: 0; color: #a4508b; font-size: 1.1rem;">Letter from ${letter.date}</h4>
            <p>${letter.content}</p>
        `;
        savedLettersContainer.appendChild(letterDiv);
    });
};
</script>
</body>
</html>
